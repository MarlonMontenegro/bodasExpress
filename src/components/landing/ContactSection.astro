---
const businessName = "BodasExpress";

const phoneLocal = "77903656";
const phoneDisplay = "7790-3656";

const whatsappNumberIntl = "503" + phoneLocal;

const facebookUrl = "https://www.facebook.com/BodasExpressSv/";

const addressLine1 = "San Salvador, El Salvador";
const addressLine2 = "41 av Sur, Colonia Flor Blanca.";

const mapsEmbedUrl = "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3876.362494127694!2d-89.21523472413553!3d13.69648179857029!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f6331c489bf9b9b%3A0x1584fed9724a2926!2sBodas%20Express!5e0!3m2!1ses!2ssv!4v1768956373473!5m2!1ses!2ssv";

// Textos
const eyebrow = "UBICACIÓN";
const title = "Agendar una visita al local";
const description =
  "Nos gustaría conocerte. Elige una fecha y nosotros nos ponemos en contacto por WhatsApp para confirmar.";

// Mensaje base WhatsApp
const waTemplate =
  `Hola, quiero agendar una visita al local de ${businessName}.\n` +
  `Mi fecha preferida es: [fecha seleccionada].\n` +
  `Mi nombre es: [nombre].`;
---

<section id="contacto" class="py-16 md:py-24">
  <div class="w-full px-4 md:px-8">
    <div class="mx-auto w-full max-w-[1400px]">

      {/* top grid */}
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 lg:gap-16 items-start">

        {/* LEFT: info */}
        <div>
          <p class="text-[10px] md:text-[11px] tracking-[0.32em] uppercase text-slate-500">
            {eyebrow}
          </p>

          <h2 class="mt-4 text-4xl md:text-6xl font-serif leading-[1.05] text-slate-900">
            {title}
          </h2>

          <p class="mt-5 max-w-xl text-slate-600 leading-relaxed">
            {description}
          </p>

          {/* cards */}
          <div class="mt-10 space-y-4">
            {/* Teléfono/WhatsApp */}
            <div class="flex items-start gap-4 rounded-2xl bg-white ring-1 ring-black/5 shadow-sm p-5">
              <div class="h-10 w-10 rounded-xl bg-emerald-50 text-emerald-700 flex items-center justify-center">
                {/* phone icon */}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2" />
                </svg>
              </div>

              <div class="flex-1">
                <p class="text-xs text-slate-500">Teléfono / WhatsApp</p>
                <div class="mt-1 flex flex-wrap items-center gap-3">
                  <a
                    href={`tel:${phoneLocal}`}
                    class="text-sm font-semibold text-slate-900 hover:underline"
                  >
                    {phoneDisplay}
                  </a>

                  <a
                    href={`https://wa.me/${whatsappNumberIntl}`}
                    target="_blank"
                    rel="noopener"
                    class="inline-flex items-center gap-2 rounded-full bg-[#25D366] px-3 py-1.5 text-xs font-semibold text-white
                           hover:brightness-95 transition"
                  >
                    {/* whatsapp icon */}
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="none"
                      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                      <path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" />
                      <path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" />
                    </svg>
                    WhatsApp
                  </a>
                </div>
              </div>
            </div>

            {/* Dirección */}
            <div class="flex items-start gap-4 rounded-2xl bg-white ring-1 ring-black/5 shadow-sm p-5">
              <div class="h-10 w-10 rounded-xl bg-emerald-50 text-emerald-700 flex items-center justify-center">
                {/* map pin */}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M12 11a3 3 0 1 0 0 -6a3 3 0 0 0 0 6z" />
                  <path d="M12 21l-3 -6l3 -4l3 4l-3 6" />
                </svg>
              </div>

              <div class="flex-1">
                <p class="text-xs text-slate-500">Dirección</p>
                <p class="mt-1 text-sm font-semibold text-slate-900">{addressLine1}</p>
                <p class="mt-1 text-xs text-slate-600">{addressLine2}</p>
              </div>
            </div>

          </div>

          {/* social */}
          <div class="mt-6">
            <p class="text-xs text-slate-500">Síguenos</p>
            <div class="mt-3 flex items-center gap-3">
              <a
                href={facebookUrl}
                target="_blank"
                rel="noopener"
                aria-label="Facebook"
                class="h-10 w-10 rounded-xl bg-emerald-50 text-emerald-800 hover:bg-emerald-100 transition flex items-center justify-center"
              >
                {/* Facebook SVG (tu icono) */}
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" />
                </svg>
              </a>
              <a
                href={`https://wa.me/${whatsappNumberIntl}`}
                target="_blank"
                rel="noopener"
                aria-label="WhatsApp"
                class="h-10 w-10 rounded-xl bg-emerald-50 text-emerald-800 hover:bg-emerald-100 transition flex items-center justify-center"
              >
                {/* WhatsApp SVG (tu icono) */}
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" />
                  <path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" />
                </svg>
              </a>
            </div>
          </div>
        </div>

        {/* RIGHT: form card */}
        <div class="lg:pt-6">
          <div class="rounded-[28px] bg-white ring-1 ring-black/5 shadow-lg p-6 md:p-8">
            <h3 class="font-semibold text-lg text-slate-900">Agendar visita</h3>
            <p class="mt-1 text-xs text-slate-500">
              Solo atendemos con cita previa.
            </p>

            <form id="visitForm" class="mt-6 space-y-4">
              <div>
                <label class="text-xs font-medium text-slate-700">Tu nombre</label>
                <input
                  id="visitName"
                  type="text"
                  required
                  placeholder="Ej. Ana López"
                  class="mt-2 w-full rounded-xl bg-white px-4 py-3 text-sm
                         ring-1 ring-black/10 focus:ring-2 focus:ring-emerald-500 outline-none"
                />
              </div>

              <div>
                <label class="text-xs font-medium text-slate-700">Fecha preferida</label>
                <input
                  id="visitDate"
                  type="date"
                  required
                  class="mt-2 w-full rounded-xl bg-white px-4 py-3 text-sm
                         ring-1 ring-black/10 focus:ring-2 focus:ring-emerald-500 outline-none"
                />
              </div>

              <button
                type="submit"
                class="w-full inline-flex items-center justify-center gap-2 rounded-xl
                       bg-[#0F6B3B] px-4 py-3 text-sm font-semibold text-white
                       hover:brightness-95 active:scale-[0.99] transition"
              >
                {/* WhatsApp icon */}
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9" />
                  <path d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1" />
                </svg>
                Enviar por WhatsApp
                <span class="ml-1">→</span>
              </button>

              <p class="text-[11px] text-slate-400 text-center">
                Para brindarte una mejor atención, las citas se confirman con anticipación por WhatsApp y están sujetas a disponibilidad de fecha y hora.
              </p>
            </form>
          </div>
        </div>
      </div>

      {/* MAPA abajo */}
      <div class="mt-10 overflow-hidden rounded-[28px] ring-1 ring-black/5 shadow-lg bg-white">
        <iframe
          src={mapsEmbedUrl}
          width="100%"
          height="360"
          style="border:0;"
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
          title="Ubicación del local - Bodas Express"
        ></iframe>
      </div>
    </div>
  </div>
</section>

<script is:inline define:vars={{ whatsappNumberIntl, waTemplate }}>
  const form = document.getElementById("visitForm");
  const nameInput = document.getElementById("visitName");
  const dateInput = document.getElementById("visitDate");

  // min date hoy
  if (dateInput) {
    const today = new Date();
    const yyyy = today.getFullYear();
    const mm = String(today.getMonth() + 1).padStart(2, "0");
    const dd = String(today.getDate()).padStart(2, "0");
    dateInput.min = `${yyyy}-${mm}-${dd}`;
  }

  form?.addEventListener("submit", (e) => {
    e.preventDefault();

    const name = (nameInput?.value || "").trim();
    const date = (dateInput?.value || "").trim();
    if (!name || !date) return;

    const [yyyy, mm, dd] = date.split("-");
    const pretty = dd && mm && yyyy ? `${dd}/${mm}/${yyyy}` : date;

    const msg = waTemplate
      .replace("[fecha seleccionada]", pretty)
      .replace("[nombre]", name);

    const url = `https://wa.me/${whatsappNumberIntl}?text=${encodeURIComponent(msg)}`;
    window.open(url, "_blank", "noopener,noreferrer");
  });
</script>
