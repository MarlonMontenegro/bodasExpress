---
import { Image } from "astro:assets";

import g1 from "../../assets/boda.png";
import g2 from "../../assets/hero-center.png";
import g3 from "../../assets/hero-right.png";
import g4 from "../../assets/foto_celebracion.png";
import g5 from "../../assets/novia.png";
import g6 from "../../assets/novia_familia.png";
import g7 from "../../assets/foto_novios.png";
import g8 from "../../assets/bodas-express-novios.png";

const eyebrow = "GALERÍA";
const title = "Momentos reales";

// velocidad: menor = más rápido, mayor = más lento
const speedSeconds = 80;

// items
const items = [
  { src: g1, alt: "Pareja firmando acta en boda civil" },
  { src: g2, alt: "Novios durante ceremonia de boda civil" },
  { src: g3, alt: "Recién casados celebrando su boda civil" },
  { src: g4, alt: "Celebración después de boda civil con familiares" },
  { src: g5, alt: "Novia feliz durante ceremonia civil" },
  { src: g6, alt: "Familia acompañando a los novios en boda civil" },
  { src: g7, alt: "Pareja de recién casados posando después de la ceremonia" },
  { src: g8, alt: "Novios en ceremonia civil en Bodas Express" },
];

// duplicado para loop perfecto
const loopItems = [...items, ...items];
---

<section id="galeria" class="py-14 md:py-18">
  <div class="w-full px-4 md:px-8">
    <div class="mx-auto w-full max-w-[1400px]">
      <header class="mb-6 md:mb-8">
        <p class="text-[10px] md:text-[11px] tracking-[0.32em] uppercase text-slate-500">
          {eyebrow}
        </p>
        <h2 class="mt-3 font-serif text-3xl md:text-5xl leading-[1.05] text-slate-900">
          {title}
        </h2>
      </header>

      {/* viewport */}
      <div class="relative overflow-hidden marquee-wrapper">
        {/* fade edges (súper pro, opcional) */}
        <div class="pointer-events-none absolute inset-y-0 left-0 w-16 md:w-24 bg-gradient-to-r from-white to-transparent z-10"></div>
        <div class="pointer-events-none absolute inset-y-0 right-0 w-16 md:w-24 bg-gradient-to-l from-white to-transparent z-10"></div>

        {/* track animado */}
        <div
          class="marquee-track flex gap-6 will-change-transform"
          style={`--marquee-duration: ${speedSeconds}s;`}
          aria-label="Galería de bodas"
        >
          {loopItems.map((it, idx) => (
            <figure class="shrink-0" key={idx}>
              <div class="relative overflow-hidden rounded-[28px] bg-slate-100 ring-1 ring-black/5">
                {/* ancho/alto tipo tu ejemplo */}
                <div class="w-[78vw] max-w-[360px] h-[420px] md:h-[520px] lg:h-[560px]">
                  <Image
                    src={it.src}
                    alt={it.alt}
                    class="h-full w-full object-cover"
                    format="webp"
                    loading="lazy"
                    widths={[480, 768, 1024]}
                    sizes="(max-width: 768px) 78vw, 360px"
                  />
                </div>
                <div class="absolute inset-0 bg-black/0 hover:bg-black/5 transition"></div>
              </div>
            </figure>
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Animación smooth y SIN salto visible:
     - la segunda mitad del track es copia exacta de la primera
     - por eso translateX(-50%) es un loop perfecto
  */
  .marquee-track {
    animation: marquee var(--marquee-duration, 52s) linear infinite;
  }

  /* pausa al hover (opcional, se siente pro) */
  .marquee-track:hover {
    animation-play-state: paused;
  }

  @keyframes marquee {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-50%);
    }
  }

  /* Respeto a accesibilidad */
  @media (prefers-reduced-motion: reduce) {
    .marquee-track {
      animation: none;
      transform: none;
      overflow-x: auto;
      padding-bottom: 0.5rem;
    }
  }
  .marquee-track {
  display: flex;
  width: max-content;
  animation: marquee var(--marquee-duration, 55s) linear infinite;
}
</style>